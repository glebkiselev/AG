{% extends "layout.html" %}
{% block body %}
   <style>
            table {
                border-collapse: collapse;
                border: 2px black solid;
                font: 12px sans-serif;
            }

            td {
                border: 1px black solid;
                padding: 5px;
            }
        </style>
		<style>
		*,
*:after,
*::before {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;

nav a {
	position: relative;
	display: inline-block;
	margin: 15px 25px;
	outline: none;
	color: #fff;
	text-decoration: none;
	text-transform: uppercase;
	letter-spacing: 1px;
	font-weight: 400;
	text-shadow: 0 0 1px rgba(255,255,255,0.3);
	font-size: 1.35em;
}
nav a:hover,
nav a:focus {
	outline: none;
}
}
#bodys{
	max-width: 100%;
	min-width:50%;
	background-color: #aaaaaa;
	max-height:100%;
	min-height:90%;
}

nav a:hover,
nav a:focus {
	outline: none;
}
.cl-effect-1 a::before,
.cl-effect-1 a::after {
	display: inline-block;
	opacity: 0;
	-webkit-transition: -webkit-transform 0.3s, opacity 0.2s;
	-moz-transition: -moz-transform 0.3s, opacity 0.2s;
	transition: transform 0.3s, opacity 0.2s;
}

.cl-effect-1 a::before {
	margin-right: 10px;
	content: '[';
	-webkit-transform: translateX(20px);
	-moz-transform: translateX(20px);
	transform: translateX(20px);
}

.cl-effect-1 a::after {
	margin-left: 10px;
	content: ']';
	-webkit-transform: translateX(-20px);
	-moz-transform: translateX(-20px);
	transform: translateX(-20px);
}

.cl-effect-1 a:hover::before,
.cl-effect-1 a:hover::after,
.cl-effect-1 a:focus::before,
.cl-effect-1 a:focus::after {
	opacity: 1;
	-webkit-transform: translateX(0px);
	-moz-transform: translateX(0px);
	transform: translateX(0px);
}

#progress {
 color: #0063a6;
  font-size: .6em;
  line-height: 1.5em;
  text-indent: .5em;
  width: 15em;
  height: 1.8em;
  border: 1px solid #0063a6;
  background: #fff;

}
.progress-bar {
    position: fixed;
    margin-top: 40px;
    height: 48px;
    border: 1px solid #cfcfcf;
    padding: 5px;
    width: 80%;
}

.progress-bar__inner {
    position: relative;
    width: 100%;
    height: 100%;
    background-color: #e9ebec;
}

.progress-bar__scale {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 48px;
    width: 0px;
    background-color: #00adef;
    -webkit-transition: all 0.8s 0.2s;
    transition: all 0.8s 0.2s;
}

.progress-bar__scale-25 {width: 25%;}
.progress-bar__scale-50 {width: 50%;}
.progress-bar__scale-75 {width: 75%;}
.progress-bar__scale-100 {width: 100%;}
.invis {visibility: hidden;}

.knowledge-bl__txt-cont {position: relative;}

.knowledge-bl__percentage {
   position: fixed;
    float: left;
    width: 260px;
    margin-top: 90px;
    margin-left: 7px;
    font-size: 98px;
    font-weight: 700;
    color: #00adef;
    margin-bottom: 1000px;
}

.percentage-reserve-100 {
    position: absolute;
    width: 260px;
    top: 36px;
    left: 7px;
    font-size: 98px;
    font-weight: 700;
    color: #00adef;
    display: none;
}
.db {display: block !important;}

<!-- #myProgress {
  width: 30%;
  background-color: #ddd;
} -->

#border {
      max-width: 740px;
    border: 4px ridge grey;
    padding: 10px;
    margin: auto;

}
#innerborder {
    max-width: 400px;
    position: relative;
    border: 4px ridge grey;
    padding: 10px;

}
#log {
      max-width: 300px;
    position: relative;
    border: 4px ridge grey;
    padding: 10px;
    right: -400px;
    top: -453px;
    left: 410px;
}


#polya {
	width: 1190px;
	background-color: #ffffff;
	padding-left: 100px;
	padding-right: 100px;
    margin-right: 15%;
	margin-left: 15%;
	min-height:90%;

}
#result {
width: 50%;
margin:auto;

}
</style>
<!-- <script>
	window.onload = function() {
		console.log("begin");

		var jsonResult = '{{result_tab}}'.replace(/&#39;/g, '"');
		console.log(jsonResult);
		var json = null;
		try {
			var table = document.getElementById("json_result");
			json = JSON.parse(jsonResult);
			console.log(json.result.length);
			for (var i = 0; i < json.result.length; i++) {
				var row = table.insertRow(table.rows.length);

				for (var j = 0; j < json.result[i].length; j++) {
					var cell = row.insertCell(j);
					var newText  = document.createTextNode(json.result[i][j]);
					cell.appendChild(newText);
				}
			}
		} catch(e) {
			console.log("error " + e);
		} finally {

		}

		console.log("end");
	}
</script> -->

<!--<script>
var oFileIn;

  $(function() {
    oFileIn = document.getElementById('my_file_input');
    if(oFileIn.addEventListener) {
        oFileIn.addEventListener('change', filePicked, false);
    }
            });


function filePicked(oEvent) {
    // Get The File From The Input
    var oFile = oEvent.target.files[0];
    var sFilename = oFile.name;
    // Create A File Reader HTML5
    var reader = new FileReader();

    // Ready The Event For When A File Gets Selected
    reader.onload = function(e) {
        var data = e.target.result;
        var cfb = XLS.CFB.read(data, {type: 'binary'});
        var wb = XLS.parse_xlscfb(cfb);
        // Loop Over Each Sheet
        wb.SheetNames.forEach(function(sheetName) {
            // Obtain The Current Row As CSV
            var sCSV = XLSX.utils.make_csv(wb.Sheets[sheetName]);
            var oJS = XLSX.utils.sheet_to_row_object_array(wb.Sheets[sheetName]);

            $("#my_file_output").html(sCSV);
            console.log(oJS)
        });
    };

    // Tell JS To Start Reading The File.. You could delay this if desired
    reader.readAsBinaryString(oFile);
}
</script>-->


<script type="text/javascript">
  $(function() {
    var submit_form = function(e) {
      $.getJSON($SCRIPT_ROOT + '/_findwords', {
        /*url: $('input[name="url"]').val(),*/
		/*word1: $('input[name="word1"]').val(),
		word2: $('input[name="word2"]').val(),
		word3: $('input[name="word3"]').val() */
      }, function(data) {
		console.log(data)
      /*  $('#result').html(data.result);*/

	  //var jsonResult = '{{result_tab}}'.replace(/&#39;/g, '"');
		//console.log(jsonResult);
		try {
			var table = document.getElementById("json_result");
			//json = JSON.parse(data);
			console.log(data.result_data.length);
			for (var i = 0; i < data.result_data.length; i++) {
				var row = table.insertRow(table.rows.length);

				for (var j = 0; j < data.result_data[i].length; j++) {
					var cell = row.insertCell(j);
					var newText  = document.createTextNode(data.result_data[i][j]);
					cell.appendChild(newText);
				}
			}
		} catch(e) {
			console.log("error " + e);
		} finally {

		}


        $('input[name=url]').focus().select();
		$('#progress').css('display', 'none');
	/* 	console.log(data.result) */
      });
      return false;
    };
    $('a#calculate').bind('click', submit_form);
    $('input[type=text]').bind('keydown', function(e) {
      if (e.keyCode == 13) {
        submit_form(e);
      }
    });
    $('input[name=a]').focus();
  });
</script>

<div id="bodys">
<div id="polya">
<div id ="border">
    <div id="innerborder">
<div id="text">
<p>
   <p>url</p>
  <input type="text" size="20" name="url" value="http://toyota-axsel.com"> <br>
  <p>word1</p>
  <input type="text" size="10" name="word1" > <br>
  <p>word2</p>
  <input type="text" size="10" name="word2"> <br>
  <p>word3</p>
  <input type="text" size="10" name="word3"> <br>

  <span id="progress" style="display: none;">PROGRESS BAR</span>
  <!--<p><br><progress id="progressbar" value="0" max="1000"></progress></p>-->
<nav class="cl-effect-1">
<p><a href=# data-hover="Ссылка 1" id="calculate" onclick="$('#progress').css('display', 'block'); loadProgressBar();">Calculate server side</a>
<!-- <p><a href="/up" data-hover="Upload file" id="drum">Upload file</a> -->
<p><a href="/file-downloads/" data-hover="Download" id="d">Doawnload file</a>
</nav>
<div id="table"><table></table></div>
<div id="result1"><span id="result"></span></div>
<form action="" method=post enctype=multipart/form-data>
    <p><input type="file" id="my_file_input" />
<div id='my_file_output'></div>
<!-- <input type=submit value=Upload> -->
   </form>
   <table cellpadding=3 cellspacing=0 border=1 id="json_result">
   </table>
</div>

</div>
    <div id = "log">

        </div>
     <form action="upload" method="post" enctype="multipart/form-data">
        <input type="file" name="file">
        <input type="submit" value="Upload">
      </form>
</div>
<!-- <script src="js/jquery.js">
var progressbar = $('#progressbar'),
max = progressbar.attr('max'),
value = progressbar.val(),
time = (1000/max)*5;

var loading = function() {
value += 1;
addValue = progressbar.val(value);
if (value == max) {
  clearInterval(animate);
}
}
$('.progress-value').html(value + '%');
setInterval(function() {
  loading();
}, time);
var animate = setInterval(function() {
  loading();
}, time);
</script> -->
<script type="text/javascript">
function loadProgressBar() {
   
        var progressbar = $('#progressbar'),
            max = progressbar.attr('max'),
            time = (1000/max)*5,	
            value = progressbar.val();
            var loading = function() {
                value += 1;
                addValue = progressbar.val(value);
 
                $('.progress-value').html(value + '%');
 
                if (value == max) {
                    clearInterval(animate);			           
                }
            };
 
            var animate = setInterval(function() {
                loading();
            }, time);
    };
</script>
	
</div>
</div>
{% endblock %}